import{a as L,b as U,c as B}from"./chunk-2JSXGCUO.js";import{q as G}from"./chunk-GW62PQDN.js";import{a as q}from"./chunk-WWOXZNFR.js";import{a as Z}from"./chunk-L7GBDS54.js";import{Aa as _,Ba as T,Ca as N,Da as F,Ea as D,Ga as k,H as d,Ha as n,I,Ka as j,La as x,M as O,Ma as a,O as h,S as P,T as w,U as v,j as y,n as M,r as s,s as l,u as i,v as H,va as E,w as f}from"./chunk-5OIP4QEW.js";var p=class t{constructor(o,e){this.authService=o;this.router=e}canActivate(o,e){return this.authService.isAuthenticated()?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:e.url}}),!1)}static \u0275fac=function(e){return new(e||t)(i(a),i(n))};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var m=class t{constructor(o,e){this.authService=o;this.router=e}canActivate(o,e){return this.authService.isAuthenticated()&&this.authService.isAdmin()?!0:(this.router.navigate(["/dashboard"]),!1)}static \u0275fac=function(e){return new(e||t)(i(a),i(n))};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var u=class t{constructor(o,e){this.authService=o;this.router=e}canActivate(o,e){let r=o.data.roles;return this.authService.isAuthenticated()&&this.authService.hasRole(r)?!0:(this.router.navigate(["/dashboard"]),!1)}static \u0275fac=function(e){return new(e||t)(i(a),i(n))};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var $=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",loadChildren:()=>import("./chunk-2TCVFLEL.js").then(t=>t.LoginModule)},{path:"dashboard",loadChildren:()=>import("./chunk-FW2OWDLJ.js").then(t=>t.DashboardModule),canActivate:[p]},{path:"projects",loadChildren:()=>import("./chunk-N5E4ZUXT.js").then(t=>t.ProjectsModule),canActivate:[p,u],data:{roles:["Admin","Super Admin","Editor"]}},{path:"tasks",loadChildren:()=>import("./chunk-XWCKEAKW.js").then(t=>t.TasksModule),canActivate:[p]},{path:"users",loadChildren:()=>import("./chunk-U55TCZTB.js").then(t=>t.UsersModule),canActivate:[p,m]},{path:"comments",loadChildren:()=>import("./chunk-FG5SGBHL.js").then(t=>t.CommentsModule),canActivate:[p]},{path:"**",redirectTo:"/login"}],S=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=f({type:t});static \u0275inj=l({imports:[j.forRoot($),j]})};function z(t,o){t&1&&v(0,"router-outlet")}function J(t,o){t&1&&v(0,"app-dashboard")}function K(t,o){t&1&&v(0,"router-outlet")}var g=class t{constructor(o,e){this.router=o;this.authService=e}isLoginPage=!1;isAuthenticated=!1;ngOnInit(){this.authService.isAuthenticated$.subscribe(o=>{this.isAuthenticated=o}),this.router.events.subscribe(o=>{o instanceof D&&(this.isLoginPage=o.url==="/login")})}static \u0275fac=function(e){return new(e||t)(I(n),I(a))};static \u0275cmp=H({type:t,selectors:[["app-root"]],decls:4,vars:3,consts:[[1,"app-container"],[4,"ngIf"]],template:function(e,r){e&1&&(P(0,"div",0),O(1,z,1,0,"router-outlet",1)(2,J,1,0,"app-dashboard",1)(3,K,1,0,"router-outlet",1),w()),e&2&&(d(),h("ngIf",r.isLoginPage),d(),h("ngIf",!r.isLoginPage&&r.isAuthenticated),d(),h("ngIf",!r.isLoginPage&&!r.isAuthenticated))},dependencies:[E,k,U],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;overflow:hidden}"]})};var R=class t{constructor(o,e){this.authService=o;this.router=e}intercept(o,e){return e.handle(o).pipe(M(r=>(r.status===401&&this.authService.logout().subscribe({complete:()=>{this.router.navigate(["/login"])}}),r.status===403&&console.error("Access denied:",r.error.error),y(r))))}static \u0275fac=function(e){return new(e||t)(i(a),i(n))};static \u0275prov=s({token:t,factory:t.\u0275fac})};var C=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=f({type:t,bootstrap:[g]});static \u0275inj=l({providers:[a,x,L,q,Z,p,m,u,{provide:_,useClass:R,multi:!0}],imports:[F,S,T,G,B]})};N().bootstrapModule(C,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
